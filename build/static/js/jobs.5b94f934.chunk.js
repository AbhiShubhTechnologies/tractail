"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[18],{1739:function(e,t,a){a.r(t);var n=a(8214),s=a(5861),c=a(885),r=a(2791),l=a(4569),i=a.n(l),o=a(501),d=a(3637),h=a(184);t.default=function(){var e=(0,r.useState)([]),t=(0,c.Z)(e,2),a=t[0],l=t[1],u=(0,r.useState)(0),m=(0,c.Z)(u,2),x=m[0],p=m[1],j=(0,r.useState)(15),f=(0,c.Z)(j,2),v=f[0],b=(f[1],(0,r.useState)(0)),g=(0,c.Z)(b,2),w=g[0],N=g[1],Z=(0,r.useState)(!1),k=(0,c.Z)(Z,2),C=(k[0],k[1]),y=(0,r.useState)(""),S=(0,c.Z)(y,2),I=S[0],V=S[1],z=(0,r.useState)(""),A=(0,c.Z)(z,2),P=A[0],L=A[1],H=(0,r.useState)([]),J=(0,c.Z)(H,2),M=J[0],B=J[1];var D=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var t,a=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:0,C(!0),e.next=4,i().get("https://atl.tractail.in/api/jobs",{params:{page:t,limit:v,search:I,account:P}}).then((function(e){C(!1),l(e.data.data),p(e.data.page),N(e.data.total)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().get("https://atl.tractail.in/api/admin/settings").then((function(e){B(e.data.accounts)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){D(),T()}),[P]);var E=function(e){V(e),0===e.length&&(l([]),V(""),document.getElementById("searchString").value="",D()),e.length<=2||D()};var U=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().post("https://atl.tractail.in/api/job/update",t).then((function(e){alert(e.data.message),window.location.reload(!1)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"row",children:(0,h.jsxs)("div",{className:"col-md-11 mx-auto",children:[(0,h.jsxs)("div",{className:"row align-items-center mt-2",children:[(0,h.jsx)("div",{className:"col-md-2 mb-3",children:(0,h.jsx)("h2",{className:"text-primary mb-0",children:"Jobs"})}),(0,h.jsx)("div",{className:"col-md-6 mb-3 mx-auto",children:(0,h.jsx)("input",{type:"search",name:"search",id:"searchString",className:"form-control",placeholder:"Search by batch...",maxLength:"100",onChange:function(e){return E(e.target.value)},autoComplete:"off"})}),(0,h.jsx)("div",{className:"col-md-2 col-lg-1 mb-3 ms-auto",children:(0,h.jsxs)("select",{className:"form-select",value:P,onChange:function(e){L(e.target.value),D()},children:[(0,h.jsx)("option",{value:"",children:"All"}),M.map((function(e){return(0,h.jsx)("option",{value:e.metaId,children:e.meta_key},e.meta_key)}))]})}),(0,h.jsx)("div",{className:"col-md-2 col-lg-auto mb-3",children:(0,h.jsx)(o.rU,{className:"btn btn-primary",to:"/admin/add/job",children:"Add Job"})})]}),(0,h.jsx)("div",{className:"table-responsive mb-3",children:(0,h.jsxs)("table",{className:"table table-hover table-sm table-striped mb-0",children:[(0,h.jsx)("thead",{className:"thead-dark",children:(0,h.jsxs)("tr",{className:"table-dark",children:[(0,h.jsx)("th",{scope:"col",children:"Job"}),(0,h.jsx)("th",{scope:"col",children:"Account ID"}),(0,h.jsx)("th",{scope:"col",children:"Batch"}),(0,h.jsx)("th",{scope:"col",children:"Total"}),(0,h.jsx)("th",{scope:"col",children:"Scanned"}),(0,h.jsx)("th",{scope:"col",children:"Pending"}),(0,h.jsx)("th",{scope:"col",children:"Created On"}),(0,h.jsx)("th",{scope:"col",className:"text-end",children:"Action"})]})}),(0,h.jsx)("tbody",{children:a.map((function(e){return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:(0,h.jsxs)(o.rU,{to:"/admin/job/".concat(e.jobId),children:["#",e.jobId||"1"]})}),(0,h.jsx)("td",{children:e.accountId}),(0,h.jsx)("td",{children:e.batch}),(0,h.jsx)("td",{children:e.total}),(0,h.jsx)("td",{children:e.scanned}),(0,h.jsx)("td",{children:e.pending}),(0,h.jsx)("td",{children:new Date(e.updated).toLocaleDateString()}),(0,h.jsx)("td",{className:"text-end",children:(0,h.jsx)("button",{className:"btn btn-sm border-0 btn-outline-danger",onClick:function(){window.confirm("Are you sure you want to delete this Job?")&&U(e)},children:(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash",viewBox:"0 0 16 16",children:[(0,h.jsx)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),(0,h.jsx)("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]})})})]},e.jobId)}))})]})}),(0,h.jsx)(d.Z,{activePage:x,totalItemsCount:w,itemsCountPerPage:v,onChange:function(e){return D(e)},innerClass:"pagination justify-content-center small mb-0",itemClass:"page-item",linkClass:"page-link",activeLinkClass:"active",firstPageText:"First",lastPageText:"Last"})]})})})}}}]);
//# sourceMappingURL=jobs.5b94f934.chunk.js.map