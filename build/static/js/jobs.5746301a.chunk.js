"use strict";(self.webpackChunkairtelTractail=self.webpackChunkairtelTractail||[]).push([[18],{1739:function(e,t,n){n.r(t);var a=n(4165),c=n(5861),s=n(9439),r=n(2791),o=n(1087),i=n(3637),l=n(1243),d=n(184);t.default=function(){var e=(0,r.useState)([]),t=(0,s.Z)(e,2),n=t[0],h=t[1],u=(0,r.useState)(0),m=(0,s.Z)(u,2),x=m[0],p=m[1],v=(0,r.useState)(0),j=(0,s.Z)(v,2),f=j[0],b=j[1],_=(0,r.useState)(!1),g=(0,s.Z)(_,2),S=g[0],C=g[1],T=(0,r.useState)(""),w=(0,s.Z)(T,2),E=w[0],N=w[1],P=(0,r.useState)(""),A=(0,s.Z)(P,2),R=A[0],O=A[1],Z=(0,r.useState)([]),D=(0,s.Z)(Z,2),k=D[0],L=D[1],y=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t,n=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:0,C(!0),e.next=4,l.Z.get({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL+"/jobs",{params:{page:t,limit:15,search:E,account:R}}).then((function(e){C(!1),h(e.data.data),p(e.data.page),b(e.data.total)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL+"/admin/settings").then((function(e){L(e.data.accounts)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){y(),H()}),[R]);var I=function(e){N(e),0===e.length&&(h([]),N(""),document.getElementById("searchString").value="",y()),e.length<=2||y()};var U=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.post({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL+"/job/update",t).then((function(e){alert(e.data.message),window.location.reload(!1)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL+"/admin/statistics/recalculate").then((function(e){alert("Statistics have been updated"),window.location.reload(!1)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function K(e){return e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],(0,d.jsx)(d.Fragment,{children:e.map((function(e){return(0,d.jsx)("p",{className:"placeholder-wave mb-0",children:(0,d.jsx)("span",{className:"placeholder col-12 bg-secondary"})},e)}))})}return(0,d.jsx)("div",{className:"container-lg",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsxs)("div",{className:"col-12",children:[(0,d.jsxs)("div",{className:"row align-items-center mt-2",children:[(0,d.jsx)("div",{className:"col-md-2 mb-3",children:(0,d.jsx)("h2",{className:"text-primary mb-0",children:"Jobs"})}),(0,d.jsx)("div",{className:"col-md-4 mb-3 mx-auto",children:(0,d.jsx)("input",{type:"search",name:"search",id:"searchString",className:"form-control",placeholder:"Search by batch...",maxLength:"100",onChange:function(e){return I(e.target.value)},autoComplete:"off"})}),(0,d.jsx)("div",{className:"col-md-2 col-lg-1 mb-3 ms-auto",children:(0,d.jsxs)("select",{className:"form-select",value:R,onChange:function(e){O(e.target.value),y()},children:[(0,d.jsx)("option",{value:"",children:"All"}),k.map((function(e){return(0,d.jsx)("option",{value:e.metaId,children:e.meta_key},e.meta_key)}))]})}),(0,d.jsx)("div",{className:"col-md-1 col-lg-auto mb-3",children:(0,d.jsx)("button",{className:"btn btn-outline-secondary",onClick:V,children:(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-arrow-clockwise",viewBox:"0 0 16 16",children:[(0,d.jsx)("path",{fillRule:"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"}),(0,d.jsx)("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"})]})})}),(0,d.jsx)("div",{className:"col-md-2 col-lg-auto mb-3",children:(0,d.jsx)(o.rU,{className:"btn btn-primary",to:"/admin/add/job",children:"Add Job"})})]}),S?(0,d.jsx)(K,{rows:"20"}):(0,d.jsx)("div",{className:"table-responsive mb-3",children:(0,d.jsxs)("table",{className:"table table-hover table-sm table-striped mb-0",children:[(0,d.jsx)("thead",{className:"thead-dark",children:(0,d.jsxs)("tr",{className:"table-dark",children:[(0,d.jsx)("th",{scope:"col",children:"Job"}),(0,d.jsx)("th",{scope:"col",children:"Account ID"}),(0,d.jsx)("th",{scope:"col",children:"Batch"}),(0,d.jsx)("th",{scope:"col",children:"Total"}),(0,d.jsx)("th",{scope:"col",children:"Scanned"}),(0,d.jsx)("th",{scope:"col",children:"Error"}),(0,d.jsx)("th",{scope:"col",children:"Pending"}),(0,d.jsx)("th",{scope:"col",children:"Created On"}),(0,d.jsx)("th",{scope:"col",className:"text-end",children:"Action"})]})}),(0,d.jsx)("tbody",{children:n.map((function(e){return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsxs)(o.rU,{to:"/admin/job/".concat(e.jobId),children:["#",e.jobId||"1"]})}),(0,d.jsx)("td",{children:e.accountId}),(0,d.jsx)("td",{children:e.batch}),(0,d.jsx)("td",{children:e.total}),(0,d.jsx)("td",{children:e.scanned}),(0,d.jsx)("td",{children:e.error}),(0,d.jsx)("td",{children:e.pending}),(0,d.jsx)("td",{children:new Date(e.updated).toLocaleDateString()}),(0,d.jsx)("td",{className:"text-end",children:(0,d.jsx)("button",{className:"btn btn-sm border-0 btn-outline-danger",onClick:function(){window.confirm("Are you sure you want to delete this Job?")&&U(e)},children:(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash",viewBox:"0 0 16 16",children:[(0,d.jsx)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),(0,d.jsx)("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]})})})]},e.jobId)}))})]})}),(0,d.jsx)(i.Z,{activePage:x,totalItemsCount:f,itemsCountPerPage:15,onChange:function(e){return y(e)},innerClass:"pagination justify-content-center small mb-0",itemClass:"page-item",linkClass:"page-link",activeLinkClass:"active",firstPageText:"First",lastPageText:"Last"})]})})})}}}]);
//# sourceMappingURL=jobs.5746301a.chunk.js.map